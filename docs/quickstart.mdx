---
title: "Quickstart"
description: "Install better-cmdk and build a command palette with AI chat"
---

Install better-cmdk to add a command palette with AI chat to your React app.

## 1. Install

<CodeGroup>
```bash npm
npm install better-cmdk
```
```bash pnpm
pnpm add better-cmdk
```
```bash bun
bun add better-cmdk
```
</CodeGroup>

### Peer dependencies

better-cmdk requires React 18+ and Tailwind CSS v4:

```bash
npm install react react-dom tailwindcss
```

For AI chat, you also need the Vercel AI SDK:

```bash
npm install ai @ai-sdk/react @ai-sdk/openai
```

## 2. Configure Tailwind CSS v4

Tell Tailwind to scan better-cmdk's components so its classes are included in your build:

```css
@import "tailwindcss";
@source "node_modules/better-cmdk";
```

Then add the CSS variables for the shadcn/ui design tokens.

<Accordion title="CSS variables">
  These match the shadcn/ui design tokens. Override them to match your brand.

  ```css
  :root {
    --radius: 0.625rem;
    --background: oklch(1 0 0);
    --foreground: oklch(0.145 0 0);
    --popover: oklch(1 0 0);
    --popover-foreground: oklch(0.145 0 0);
    --primary: oklch(0.205 0 0);
    --primary-foreground: oklch(0.985 0 0);
    --muted: oklch(0.97 0 0);
    --muted-foreground: oklch(0.556 0 0);
    --accent: oklch(0.97 0 0);
    --accent-foreground: oklch(0.205 0 0);
    --border: oklch(0.922 0 0);
    --input: oklch(0.922 0 0);
    --ring: oklch(0.708 0 0);
  }

  @theme inline {
    --color-background: var(--background);
    --color-foreground: var(--foreground);
    --color-popover: var(--popover);
    --color-popover-foreground: var(--popover-foreground);
    --color-primary: var(--primary);
    --color-primary-foreground: var(--primary-foreground);
    --color-muted: var(--muted);
    --color-muted-foreground: var(--muted-foreground);
    --color-accent: var(--accent);
    --color-accent-foreground: var(--accent-foreground);
    --color-border: var(--border);
    --color-input: var(--input);
    --color-ring: var(--ring);
  }
  ```
</Accordion>

## 3. Basic command palette

Start with a basic command palette — no AI yet. Users press `⌘K`, search, and select.

<Tabs>
  <Tab title="Recommended">
    Define your commands as data and pass them to `CommandMenu`. The component handles rendering, grouping, and search.

    ```tsx
    "use client";

    import { useState, useEffect } from "react";
    import { CalendarIcon, SearchIcon, UserIcon, SettingsIcon } from "lucide-react";
    import { CommandMenu, type CommandDefinition } from "better-cmdk";

    const commands: CommandDefinition[] = [
      {
        name: "calendar",
        label: "Calendar",
        icon: <CalendarIcon className="size-4" />,
        group: "Suggestions",
        onSelect: () => console.log("Calendar selected"),
      },
      {
        name: "search",
        label: "Search",
        icon: <SearchIcon className="size-4" />,
        group: "Suggestions",
        onSelect: () => console.log("Search selected"),
      },
      {
        name: "profile",
        label: "Profile",
        icon: <UserIcon className="size-4" />,
        group: "Settings",
        shortcut: "⌘P",
        onSelect: () => console.log("Profile selected"),
      },
      {
        name: "settings",
        label: "Settings",
        icon: <SettingsIcon className="size-4" />,
        group: "Settings",
        shortcut: "⌘S",
        onSelect: () => console.log("Settings selected"),
      },
    ];

    export function CommandPalette() {
      const [open, setOpen] = useState(false);

      useEffect(() => {
        const down = (e: KeyboardEvent) => {
          if (e.key === "k" && (e.metaKey || e.ctrlKey)) {
            e.preventDefault();
            setOpen((open) => !open);
          }
        };
        document.addEventListener("keydown", down);
        return () => document.removeEventListener("keydown", down);
      }, []);

      return (
        <CommandMenu
          open={open}
          onOpenChange={setOpen}
          commands={commands}
        />
      );
    }
    ```
  </Tab>
  <Tab title="shadcn/cmdk compatible">
    If you're migrating from shadcn/cmdk, you can use JSX children instead. This gives you full control over rendering.

    ```tsx
    "use client";

    import { useState, useEffect } from "react";
    import {
      CommandDialog,
      CommandInput,
      CommandList,
      CommandEmpty,
      CommandGroup,
      CommandItem,
      CommandSeparator,
      CommandShortcut,
    } from "better-cmdk";

    export function CommandPalette() {
      const [open, setOpen] = useState(false);

      useEffect(() => {
        const down = (e: KeyboardEvent) => {
          if (e.key === "k" && (e.metaKey || e.ctrlKey)) {
            e.preventDefault();
            setOpen((open) => !open);
          }
        };
        document.addEventListener("keydown", down);
        return () => document.removeEventListener("keydown", down);
      }, []);

      return (
        <CommandDialog open={open} onOpenChange={setOpen}>
          <CommandInput placeholder="Type a command or search..." />
          <CommandList>
            <CommandEmpty>No results found.</CommandEmpty>
            <CommandGroup heading="Suggestions">
              <CommandItem>Calendar</CommandItem>
              <CommandItem>Search</CommandItem>
            </CommandGroup>
            <CommandSeparator />
            <CommandGroup heading="Settings">
              <CommandItem>
                Profile
                <CommandShortcut>⌘P</CommandShortcut>
              </CommandItem>
              <CommandItem>
                Settings
                <CommandShortcut>⌘S</CommandShortcut>
              </CommandItem>
            </CommandGroup>
          </CommandList>
        </CommandDialog>
      );
    }
    ```
  </Tab>
</Tabs>

This gives you a `⌘K`-triggered modal with fuzzy search filtering, keyboard navigation, and grouped commands.

## 4. Add AI chat

Now add AI chat. When no command matches, users can ask the AI directly.

### Set up the API route

Create a streaming chat endpoint. Here's a Next.js example using the Vercel AI SDK with OpenAI:

```tsx
// app/api/chat/route.ts
import { openai } from "@ai-sdk/openai";
import { streamText, type UIMessage, convertToModelMessages } from "ai";

export async function POST(req: Request) {
  const { messages }: { messages: UIMessage[] } = await req.json();

  const result = streamText({
    model: openai("gpt-4o-mini"),
    messages: await convertToModelMessages(messages),
    system:
      "You are a helpful assistant in a command palette. Keep responses concise.",
  });

  return result.toUIMessageStreamResponse();
}
```

### Use CommandMenu

Point `CommandMenu` at your API endpoint:

<Tabs>
  <Tab title="Recommended">
    Add `chatEndpoint` to your existing `commands`-based palette:

    ```tsx
    "use client";

    import { useState, useEffect } from "react";
    import { CalendarIcon, SearchIcon, UserIcon, SettingsIcon } from "lucide-react";
    import { CommandMenu, type CommandDefinition } from "better-cmdk";

    const commands: CommandDefinition[] = [
      { name: "calendar", label: "Calendar", icon: <CalendarIcon className="size-4" />, group: "Suggestions", onSelect: () => console.log("Calendar") },
      { name: "search", label: "Search", icon: <SearchIcon className="size-4" />, group: "Suggestions", onSelect: () => console.log("Search") },
      { name: "profile", label: "Profile", icon: <UserIcon className="size-4" />, group: "Settings", shortcut: "⌘P", onSelect: () => console.log("Profile") },
      { name: "settings", label: "Settings", icon: <SettingsIcon className="size-4" />, group: "Settings", shortcut: "⌘S", onSelect: () => console.log("Settings") },
    ];

    export function CommandPalette() {
      const [open, setOpen] = useState(false);

      useEffect(() => {
        const down = (e: KeyboardEvent) => {
          if (e.key === "k" && (e.metaKey || e.ctrlKey)) {
            e.preventDefault();
            setOpen((open) => !open);
          }
        };
        document.addEventListener("keydown", down);
        return () => document.removeEventListener("keydown", down);
      }, []);

      return (
        <CommandMenu
          open={open}
          onOpenChange={setOpen}
          commands={commands}
          chatEndpoint="/api/chat"
        />
      );
    }
    ```
  </Tab>
  <Tab title="shadcn/cmdk compatible">
    Replace `CommandDialog` with `CommandMenu` and use the children pattern:

    ```tsx
    "use client";

    import { useState, useEffect } from "react";
    import {
      CommandMenu,
      CommandMenuInput,
      CommandMenuList,
      CommandMenuEmpty,
      CommandGroup,
      CommandItem,
      CommandShortcut,
    } from "better-cmdk";

    export function CommandPalette() {
      const [open, setOpen] = useState(false);

      useEffect(() => {
        const down = (e: KeyboardEvent) => {
          if (e.key === "k" && (e.metaKey || e.ctrlKey)) {
            e.preventDefault();
            setOpen((open) => !open);
          }
        };
        document.addEventListener("keydown", down);
        return () => document.removeEventListener("keydown", down);
      }, []);

      return (
        <CommandMenu
          open={open}
          onOpenChange={setOpen}
          chatEndpoint="/api/chat"
        >
          <CommandMenuInput placeholder="Search or ask AI..." showSendButton />
          <CommandMenuList>
            <CommandMenuEmpty />
            <CommandGroup heading="Actions">
              <CommandItem onSelect={() => console.log("Profile")}>
                Profile
                <CommandShortcut>⌘P</CommandShortcut>
              </CommandItem>
              <CommandItem onSelect={() => console.log("Settings")}>
                Settings
                <CommandShortcut>⌘S</CommandShortcut>
              </CommandItem>
            </CommandGroup>
          </CommandMenuList>
        </CommandMenu>
      );
    }
    ```
  </Tab>
</Tabs>

Your command palette now has two modes:

- **Command mode** — type to fuzzy-search commands. If nothing matches, an "Ask AI" option appears.
- **Chat mode** — select "Ask AI" or press `⌘Enter` to switch. Type a question and get a streaming AI response.

Press `Escape` in chat mode to return to command mode.

## 5. Use with modifywithai.com

[modifywithai.com](https://modifywithai.com) is a managed AI agent platform that can take actions in your app on behalf of the user — with built-in approval gates so users stay in control. Using modifywithai is optional but recommended.

### Install modifywithai

```bash
bun add modifywithai @ai-sdk/react ai
```

### Create a token endpoint

```ts
// app/api/mwai/token/route.ts
import { createAssistantTokenHandler } from "modifywithai/nextjs"

export const POST = createAssistantTokenHandler({
  appId: process.env.MWAI_APP_ID!,
  // apiKey defaults to process.env.MWAI_API_KEY
})
```

### Connect to CommandMenu

The `useAssistant()` hook from modifywithai returns an object directly compatible with CommandMenu's `chat` prop. Define your **commands** (what shows in the palette) and **actions** (what the AI agent can do) separately:

```tsx
import { useState, useEffect } from "react";
import { useAssistant, type ActionDefinition } from "modifywithai";
import { CommandMenu, type CommandDefinition } from "better-cmdk";
import { CalendarIcon, SettingsIcon } from "lucide-react";

// Commands — what shows in the palette
const commands: CommandDefinition[] = [
  { name: "calendar", label: "Calendar", icon: <CalendarIcon className="size-4" />, group: "Navigation", onSelect: () => router.push("/calendar") },
  { name: "settings", label: "Settings", icon: <SettingsIcon className="size-4" />, group: "Navigation", shortcut: "⌘,", onSelect: () => router.push("/settings") },
];

// Actions — what the AI agent can do on behalf of the user
const actions: ActionDefinition[] = [
  {
    name: "toggleDarkMode",
    description: "Toggle between light and dark mode",
    execute: () => document.documentElement.classList.toggle("dark"),
  },
  {
    name: "navigateTo",
    description: "Navigate to a page in the app",
    options: { path: { type: "string", description: "Page path", required: true } },
    execute: (opts) => { window.location.href = opts.path as string },
  },
];

function App() {
  const [open, setOpen] = useState(false);
  const assistant = useAssistant({
    tokenEndpoint: "/api/mwai/token",
    agenticActions: actions,
  });

  useEffect(() => {
    const down = (e: KeyboardEvent) => {
      if (e.key === "k" && (e.metaKey || e.ctrlKey)) {
        e.preventDefault();
        setOpen((open) => !open);
      }
    };
    document.addEventListener("keydown", down);
    return () => document.removeEventListener("keydown", down);
  }, []);

  return (
    <CommandMenu
      open={open}
      onOpenChange={setOpen}
      commands={commands}
      chat={assistant}
    />
  );
}
```

**Commands** populate the palette with searchable items users can select directly. **Actions** tell the modifywithai agent what it can do — the agent invokes them in chat mode with user approval.

## Next steps

<CardGroup cols={2}>
  <Card title="Extending" icon="puzzle-piece" href="/extending">
    Define commands, customize theming, and build advanced integrations.
  </Card>
  <Card title="modifywithai Docs" icon="book" href="https://modifywithai.com/docs">
    Learn how to set up the agent platform that powers your AI actions.
  </Card>
</CardGroup>
